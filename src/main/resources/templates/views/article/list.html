<!DOCTYPE html>
<html lang="zh-cmn-Hans" xmlns:th="http://www.thymeleaf.org" xmlns:c="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" type="text/css" href="/stylesheets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/css/plugins/timeline.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/css/sb-admin-2.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/css/plugins/morris.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/css/font-awesome-4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/css/page/myPage.css" />
    <script type="text/javascript" src="/stylesheets/js/jquery-1.11.0.js"></script>
    <script type="text/javascript" src="/stylesheets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/stylesheets/js/bootstrap-datetimepicker.zh-CN.js"></script>
    <script type="text/javascript" src="/stylesheets/js/page/jqPaginator.min.js"></script>
    <script type="text/javascript" src="/stylesheets/js/page/myPage.js"></script>
    <script type="text/javascript" src="/stylesheets/js/plugins/My97DatePicker/WdatePicker.js"></script>
    <style>
        .row{ margin: 0;}
        #dataTables-example .dropdown-menu{ right: 0; left: auto;}
    </style>
</head>
<body>
<div class="row">
    <div class="col-sm-12">
        <h1 class="page-header">文章管理</h1>
    </div>
</div>

<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-default">
            <div class="panel-heading text-left">
                <div class="row">
                    <form class="form-inline" role="form" th:object="${article}" th:action="@{/article/list}" th:method="get">
                       <!-- <input id="page" name="page" type="hidden" th:field="*{page}"  th:value="${article.page}"/>-->
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">文章编号:</div>
                                <input class="form-control" type="text" th:field="*{id}" th:value="${article.id}" id="id" name="id" value=""/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">国家:</div>
                                <input class="form-control" type="text" th:field="*{countrycode}" th:value="${article.countrycode}" id="countrycode" name="countrycode" value=""/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">媒体:</div>
                                <select id="publicationid" name="publicationid" th:field="*{publicationid}" class="form-control">
                                    <option value="0">请选择</option>
                                    <option th:each="publication:${publications}" th:selected="(${article.publicationid == publication.id})" th:value="${publication.id}" th:text="${publication.Name}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">来源渠道:</div>
                                <select id="channelid" name="channelid" th:field="*{channelid}" class="form-control">
                                    <option value="0">请选择</option>
                                    <option th:each="conchannel:${conchannels}" th:selected="(${article.channelid == conchannel.id})" th:value="${conchannel.id}" th:text="${conchannel.channelname}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">国际化语言:</div>
                                <select id="langid" name="langid" th:field="*{langid}" class="form-control">
                                    <option value="0">请选择</option>
                                    <option th:each="languagesSorts:${languagesSort}" th:selected="(${article.langid == languagesSorts.id})" th:value="${languagesSorts.id}" th:text="${languagesSorts.localname}"></option>
                                </select>
                            </div>
                        </div>
                        <!--<div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">稿件属性:</div>
                                <select id="attr" name="attr" th:field="*{attr}" class="form-control">
                                    <option value="0">请选择</option>
                                    <option th:each="attr:${attr}" th:selected="(${article.attr == attr.id})" th:value="${attr.id}" th:text="${attr.Name}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">状态:</div>
                                <select id="status" name="status" th:field="*{status}" class="form-control">
                                    <option value="0">请选择</option>
                                    <option th:each="status:${status}" th:selected="(${article.status == status.id})" th:value="${status.id}" th:text="${status.Name}"></option>
                                </select>
                            </div>
                        </div>-->
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">关键字:</div>
                                <input class="form-control" type="text" th:field="*{keywords}" th:value="${article.keywords}" id="keywords" name="keywords" value=""/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">话题:</div>
                                <select id="topicid" name="topicid" th:field="*{topicsid}"  class="form-control">
                                    <option value="0">请选择</option>
                                    <option th:each="hbtopic:${hbtopics}" th:selected="(${article.topicsid == hbtopic.tid})" th:value="${hbtopic.tid}" th:text="${hbtopic.Name}"></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">开始日期:</div>
                                <input class="form-control" type="text" placeholder="输入开始日期" th:field="*{starttime}" th:value="${article.starttime}" id="starttime" name="starttime" onClick="WdatePicker()" value=""/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon">结束日期:</div>
                                <input class="form-control" type="text" placeholder="输入结束日期" th:field="*{endtime}" th:value="${article.endtime}" id="endtime" name="endtime" onClick="WdatePicker()" value=""/>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" id="search">搜索</button>
                        <a th:href="@{/article/toadd}" class="btn btn-primary" id="add">
                            <span class="fa fa-plus-circle fa-fw"></span>
                            添加文章
                        </a>
                    </form>
                </div>
            </div>
        </div>
        <div class="panel-heading text-left">
            <div class="row">
                <a href="javascript:void(0);" class="btn btn-primary" id="passlist" >
                    <span class="fa fa-plus-circle fa-fw"></span>
                    批量发布
                </a>
                <a href="javascript:void(0);" class="btn btn-primary" id="deletelist">
                    <span class="fa fa-plus-circle fa-fw"></span>
                    批量删除
                </a>
            </div>
        </div>
        <div class="panel-body">
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                    <thead>
                        <tr>
                            <th>
                                <input type="checkbox" id="checkbox" />
                            </th>
                            <th>ID</th>
                            <th>标题</th>
                            <th>类型</th>
                            <th>国家</th>
                            <th>话题</th>
                            <th>媒体</th>
                            <th>状态</th>
                            <th>发布时间</th>
                            <th>创建时间</th>
                            <th>创建人</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item:${articles}">
                            <td>
                                <input type="checkbox" name="checkbox" th:value="${item.id}"/>
                            </td>
                            <td th:text="${item.id}"></td>
                            <td th:text="${#strings.abbreviate({item.title},20)}"></td>
                            <td th:switch="${item.ctype}">
                                <span th:case="0">正常</span>
                                <span th:case="1">未审核</span>
                                <span th:case="2">预发布</span>
                            </td>
                            <!--<td th:text="(${item.ctype == 0} ? ('普'): ${item.ctype == 1} ? ('荐') : ${item.ctype == 2} ? ('顶'))"></td>-->
                            <td th:text="${item.countrycode}"></td>
                            <td th:text="${item.topicsid}"></td>
                            <td th:text="${item.publicationid}"></td>
                            <td th:switch="${item.status}">
                                <span th:case="0">正常</span>
                                <span th:case="1">未审核</span>
                                <span th:case="2">预发布</span>
                            </td>
                            <td th:text="${#calendars.format({item.subtime},'MM-dd HH:mm')}"></td>
                            <td th:text="${#calendars.format({item.createtime},'MM-dd HH:mm')}"></td>
                            <td th:text="${item.createuid}"></td>
                            <td>
                                <div class="btn-group">
                                    <a href="javascript:void(0);" class="btn btn-primary">操作</a>
                                    <a href="javascript:void(0);" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                        <span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <a th:href="@{/article/add(id=${item.id})}">
                                                <i class="fa fa-pencil fa-fw"></i>
                                                修改
                                            </a>
                                        </li>
                                        <li>
                                            <a th:href="@{/article/delete(id=${item.id})}">
                                                <i class="fa fa-trash-o fa-fw" ></i>
                                                删除
                                            </a>
                                        </li>
                                        <li>
                                            <a th:href="@{/articlescontent/add(id=${item.id})}">
                                                <i class="fa fa-pencil fa-fw" ></i>
                                                文章内容管理
                                            </a>
                                        </li>
                                        <li th:if="${item.status}==1">
                                            <a th:href="@{/article/auditing(id=${item.id})}">
                                                <i class="fa fa-pencil fa-fw" ></i>
                                                审核
                                            </a>
                                        </li>
                                        <li>
                                            <a th:href="@{http://www.coolook.top/article/${item.id}.html}" target="_blank">
                                                <i class="fa fa-pencil fa-fw" ></i>
                                                预览
                                            </a>
                                        </li>
                                        <li>
                                            <a th:href="@{/screen/importscreen(screenstatus=1,screenid=${item.id})}">
                                                <i class="fa fa-pencil fa-fw" ></i>
                                                导入锁屏
                                            </a>
                                        </li>
                                        <li th:if="${item.status}!=2">
                                            <a th:href="@{/article/pushadd(id=${item.id})}">
                                                <i class="fa fa-pencil fa-fw" ></i>
                                                推送
                                            </a>
                                        </li>
                                        <li>
                                            <a th:href="@{/article/pushadd2(id=${item.id})}">
                                                <i class="fa fa-pencil fa-fw" ></i>
                                                推送2
                                            </a>
                                        </li>
                                        <li th:if="${item.attr}==1">
                                            <a onclick="return checkTitleAndPic('${item.id}','${item.title}','${item.titlepic}')">
                                                <i class="fa fa-pencil fa-fw" ></i>
                                                添加到置顶图
                                            </a>
                                        </li>
                                        <li th:if="${item.channelid}==1">
                                            <a th:href="@{/article/viewsource(id=${item.id})}" target="_blank">
                                                <i class="fa fa-pencil fa-fw" ></i>
                                                查看原文
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="col-sm-12 text-center">
                    <ul class="pagination" id="pagination">

                    </ul>
                    <ul id="countabs">

                    </ul>
                    <!-- 总条数 -->
                    <input type="hidden" id="PageCount" runat="server" th:value="${pageUtil.recordCount}"/>
                    <!-- 总页数 -->
                    <input type="hidden" id="countindex" runat="server" th:value="(${pageUtil.pagecount}>=1000?1000:${pageUtil.pagecount})"/>
                    <!-- 当前第几页 -->
                    <input type="hidden" id="Pagedq" runat="server" th:value="${pageUtil.currentPage}"/>
                    <!-- 请求的地址 -->
                    <input type="hidden" id="pageUrl" runat="server" th:value="@{/article/list}"/>
                    <!-- 请求的参数 -->
                    <input type="hidden" id="pageParameter" runat="server" th:value="${searchstr}"/>
                    <!--设置最多显示的页码数 可以手动设置 默认为7-->
                    <input type="hidden" id="visiblePages" runat="server" th:value="10" />
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>